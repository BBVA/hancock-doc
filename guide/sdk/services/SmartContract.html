<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>SmartContract | Hancock</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/hancock-doc/assets/css/0.styles.f72bef6a.css" as="style"><link rel="preload" href="/hancock-doc/assets/js/app.28931f4a.js" as="script"><link rel="preload" href="/hancock-doc/assets/js/4.b7600f4f.js" as="script"><link rel="preload" href="/hancock-doc/assets/js/2.80b219c5.js" as="script"><link rel="preload" href="/hancock-doc/assets/js/23.572b4ed3.js" as="script"><link rel="prefetch" href="/hancock-doc/assets/js/10.269ab162.js"><link rel="prefetch" href="/hancock-doc/assets/js/11.b8bf3ea7.js"><link rel="prefetch" href="/hancock-doc/assets/js/12.c34c027f.js"><link rel="prefetch" href="/hancock-doc/assets/js/13.22f4cec8.js"><link rel="prefetch" href="/hancock-doc/assets/js/14.e00c2b92.js"><link rel="prefetch" href="/hancock-doc/assets/js/15.ea9815ee.js"><link rel="prefetch" href="/hancock-doc/assets/js/16.1b000b63.js"><link rel="prefetch" href="/hancock-doc/assets/js/17.5afbafaa.js"><link rel="prefetch" href="/hancock-doc/assets/js/18.67a4a1bb.js"><link rel="prefetch" href="/hancock-doc/assets/js/19.ddd3b5d4.js"><link rel="prefetch" href="/hancock-doc/assets/js/20.38b4f3bc.js"><link rel="prefetch" href="/hancock-doc/assets/js/21.75b09490.js"><link rel="prefetch" href="/hancock-doc/assets/js/22.930dc03f.js"><link rel="prefetch" href="/hancock-doc/assets/js/24.2d6cc0ee.js"><link rel="prefetch" href="/hancock-doc/assets/js/25.dc9054c3.js"><link rel="prefetch" href="/hancock-doc/assets/js/26.67a87c8d.js"><link rel="prefetch" href="/hancock-doc/assets/js/27.938a2397.js"><link rel="prefetch" href="/hancock-doc/assets/js/28.fff62550.js"><link rel="prefetch" href="/hancock-doc/assets/js/29.4d3f946c.js"><link rel="prefetch" href="/hancock-doc/assets/js/3.1aba4a82.js"><link rel="prefetch" href="/hancock-doc/assets/js/30.d0fab01e.js"><link rel="prefetch" href="/hancock-doc/assets/js/5.41b26b68.js"><link rel="prefetch" href="/hancock-doc/assets/js/6.5169a9fe.js"><link rel="prefetch" href="/hancock-doc/assets/js/7.a5e9ce82.js"><link rel="prefetch" href="/hancock-doc/assets/js/8.63216889.js"><link rel="prefetch" href="/hancock-doc/assets/js/9.3b38d00f.js">
    <link rel="stylesheet" href="/hancock-doc/assets/css/0.styles.f72bef6a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar navbar-vuepress"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/hancock-doc/" class="home-link router-link-active"><img src="/hancock-doc/logo.svg" alt="Hancock" class="logo"> <!----></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/hancock-doc/" class="nav-link">Home</a></div><div class="nav-item"><a href="/hancock-doc/guide/" class="nav-link router-link-active">Guide</a></div><div class="nav-item"><a href="https://github.com/BBVA?utf8=%E2%9C%93&amp;q=hancock" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/hancock-doc/" class="nav-link">Home</a></div><div class="nav-item"><a href="/hancock-doc/guide/" class="nav-link router-link-active">Guide</a></div><div class="nav-item"><a href="https://github.com/BBVA?utf8=%E2%9C%93&amp;q=hancock" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/hancock-doc/guide/" class="sidebar-heading clickable router-link-active open"><span>Guide</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/hancock-doc/guide/getting-started/" class="sidebar-link">Getting Started</a></li><li><a href="/hancock-doc/guide/getting-started/Concept.html" class="sidebar-link">Concepts</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/hancock-doc/guide/dlt-adapter/" class="sidebar-heading clickable"><span>DLT Adapter</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/hancock-doc/guide/wallet-hub" class="sidebar-heading clickable"><span>Wallet Hub</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/hancock-doc/guide/dlt-broker/" class="sidebar-heading clickable"><span>DLT Broker</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/hancock-doc/guide/sdk/" class="sidebar-heading clickable router-link-active"><span>SDK</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="content default"><h1 id="smartcontract"><a href="#smartcontract" aria-hidden="true" class="header-anchor">#</a> SmartContract</h1> <p>Smart contracts allow the performance of credible transactions without third parties. These transactions are trackable and irreversible.</p> <p>The service needs a <a href="../java/#using-all-together">config object</a> and a service of ethereum transactions, that is included in EthereumClient.</p> <div class="language-java extra-class"><pre class="language-java"><code>    <span class="token keyword">public</span> <span class="token function">EthereumSmartContractService</span><span class="token punctuation">(</span><span class="token keyword">final</span> HancockConfig config<span class="token punctuation">,</span> <span class="token keyword">final</span> EthereumTransactionService transactionClient<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>config <span class="token operator">=</span> config<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>transactionClient <span class="token operator">=</span> transactionClient<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>To use this service only need the instance of Ethereum client.</p> <div class="language-java extra-class"><pre class="language-java"><code>EthereumClient hancockClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EthereumClient</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>

hancockClient<span class="token punctuation">.</span><span class="token function">getSmartContractService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="register-smart-contract-on-hancock"><a href="#register-smart-contract-on-hancock" aria-hidden="true" class="header-anchor">#</a> Register Smart Contract on Hancock</h2> <p>We can register the smart contract to operate with it in Hancock.</p> <p>We must deploy the contract in the dlt network before, since we need the address of the contract.</p> <div class="language-java extra-class"><pre class="language-java"><code> <span class="token operator">*</span> <span class="token annotation punctuation">@param</span> alias   An alias <span class="token keyword">for</span> the smart contract
 <span class="token operator">*</span> <span class="token annotation punctuation">@param</span> address The address of the deployed smart contract instance
 <span class="token operator">*</span> <span class="token annotation punctuation">@param</span> abi     The application binary <span class="token keyword">interface</span> <span class="token punctuation">(</span>abi<span class="token punctuation">)</span> of the deployed smart contract
 <span class="token operator">*</span> @<span class="token keyword">return</span> The result of the request
 <span class="token operator">*</span> @<span class="token keyword">throws</span> HancockException

hancockClient<span class="token punctuation">.</span><span class="token function">getSmartContractService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>alias<span class="token punctuation">,</span>address<span class="token punctuation">,</span>abi<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="invoke-a-smart-contract"><a href="#invoke-a-smart-contract" aria-hidden="true" class="header-anchor">#</a> Invoke a Smart Contract</h2> <p>We can use operations of the contract with invoke operation.</p> <p>Makes an invocation to a smart contract method. Invocations are used to call smart contract methods that writes information in the blockchain consuming gas.</p> <div class="language-java extra-class"><pre class="language-java"><code> <span class="token operator">*</span> <span class="token annotation punctuation">@param</span> contractAddressOrAlias Address or alias of the smart contract registered in Hancock
 <span class="token operator">*</span> <span class="token annotation punctuation">@param</span> method                 The name of the method to call
 <span class="token operator">*</span> <span class="token annotation punctuation">@param</span> params                 An array of arguments passed to the method
 <span class="token operator">*</span> <span class="token annotation punctuation">@param</span> from                   The address of the account doing the call
 <span class="token operator">*</span> <span class="token annotation punctuation">@param</span> options                Configuration of how the transaction will be send to the network
 <span class="token operator">*</span> @<span class="token keyword">return</span> The returned value from the smart contract method
 <span class="token operator">*</span> @<span class="token keyword">throws</span> Exception

hancockClient<span class="token punctuation">.</span><span class="token function">getSmartContractService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>contractAddressOrAlias<span class="token punctuation">,</span> method<span class="token punctuation">,</span> params<span class="token punctuation">,</span> from<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Anyway we can operate with contract deployments on dlt network without register the contract before in Hancock. In that case, beside of the parameters, we need the abi of the contract.</p> <div class="language-java extra-class"><pre class="language-java"><code>hancockClient<span class="token punctuation">.</span><span class="token function">getSmartContractService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">invokeAbi</span><span class="token punctuation">(</span>contractAddressOrAlias<span class="token punctuation">,</span> method<span class="token punctuation">,</span> params<span class="token punctuation">,</span> from<span class="token punctuation">,</span> options<span class="token punctuation">,</span> abi<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="call-a-smart-contract"><a href="#call-a-smart-contract" aria-hidden="true" class="header-anchor">#</a> Call a Smart Contract</h2> <p>We can call operations of the contract to get information about it.</p> <p>Makes a call to an smart contract method. Calls only fetch information from blockchain so it doesn't consume gas</p> <div class="language-java extra-class"><pre class="language-java"><code> <span class="token operator">*</span> <span class="token annotation punctuation">@param</span> contractAddressOrAlias Address or alias of the smart contract registered in Hancock
 <span class="token operator">*</span> <span class="token annotation punctuation">@param</span> method                 The name of the method to call
 <span class="token operator">*</span> <span class="token annotation punctuation">@param</span> params                 An array of arguments passed to the method
 <span class="token operator">*</span> <span class="token annotation punctuation">@param</span> from                   The address of the account doing the call
 <span class="token operator">*</span> @<span class="token keyword">return</span> The returned value from the smart contract method
 <span class="token operator">*</span> @<span class="token keyword">throws</span> Exception

hancockClient<span class="token punctuation">.</span><span class="token function">getSmartContractService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>contractAddressOrAlias<span class="token punctuation">,</span> method<span class="token punctuation">,</span> params<span class="token punctuation">,</span> from<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Anyway we can operate with contract deployments on dlt network without register the contract before in Hancock. In that case, beside of the parameters, we need the abi of the contract.</p> <div class="language-java extra-class"><pre class="language-java"><code>hancockClient<span class="token punctuation">.</span><span class="token function">getSmartContractService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">callAbi</span><span class="token punctuation">(</span>contractAddressOrAlias<span class="token punctuation">,</span> method<span class="token punctuation">,</span> params<span class="token punctuation">,</span> from<span class="token punctuation">,</span> abi<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="subscribe-a-smart-contract"><a href="#subscribe-a-smart-contract" aria-hidden="true" class="header-anchor">#</a> Subscribe a Smart Contract</h2> <p>Create a websocket subscription to watch transactions of type &quot;contracts&quot; in the network.</p> <div class="language-java extra-class"><pre class="language-java"><code> <span class="token operator">*</span> <span class="token annotation punctuation">@param</span> contracts An array of address or alias that will be added to the watch list
 <span class="token operator">*</span> @<span class="token keyword">return</span> A HancockSocket object which can add <span class="token keyword">new</span> <span class="token class-name">subscriptions</span> and listen incoming message
 <span class="token operator">*</span> @<span class="token keyword">throws</span> HancockException

hancockClient<span class="token punctuation">.</span><span class="token function">getSmartContractService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>contracts<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/hancock-doc/guide/sdk/java/" class="prev">
          Java/Android
        </a></span> <span class="next"><a href="/hancock-doc/guide/sdk/services/Token.html">
          Token
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/hancock-doc/assets/js/app.28931f4a.js" defer></script><script src="/hancock-doc/assets/js/4.b7600f4f.js" defer></script><script src="/hancock-doc/assets/js/2.80b219c5.js" defer></script><script src="/hancock-doc/assets/js/23.572b4ed3.js" defer></script>
  </body>
</html>
