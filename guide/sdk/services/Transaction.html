<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Transaction Service | Hancock</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/hancock-doc/assets/css/0.styles.f72bef6a.css" as="style"><link rel="preload" href="/hancock-doc/assets/js/app.28931f4a.js" as="script"><link rel="preload" href="/hancock-doc/assets/js/4.b7600f4f.js" as="script"><link rel="preload" href="/hancock-doc/assets/js/2.80b219c5.js" as="script"><link rel="preload" href="/hancock-doc/assets/js/25.dc9054c3.js" as="script"><link rel="prefetch" href="/hancock-doc/assets/js/10.269ab162.js"><link rel="prefetch" href="/hancock-doc/assets/js/11.b8bf3ea7.js"><link rel="prefetch" href="/hancock-doc/assets/js/12.c34c027f.js"><link rel="prefetch" href="/hancock-doc/assets/js/13.22f4cec8.js"><link rel="prefetch" href="/hancock-doc/assets/js/14.e00c2b92.js"><link rel="prefetch" href="/hancock-doc/assets/js/15.ea9815ee.js"><link rel="prefetch" href="/hancock-doc/assets/js/16.1b000b63.js"><link rel="prefetch" href="/hancock-doc/assets/js/17.5afbafaa.js"><link rel="prefetch" href="/hancock-doc/assets/js/18.67a4a1bb.js"><link rel="prefetch" href="/hancock-doc/assets/js/19.ddd3b5d4.js"><link rel="prefetch" href="/hancock-doc/assets/js/20.38b4f3bc.js"><link rel="prefetch" href="/hancock-doc/assets/js/21.75b09490.js"><link rel="prefetch" href="/hancock-doc/assets/js/22.930dc03f.js"><link rel="prefetch" href="/hancock-doc/assets/js/23.572b4ed3.js"><link rel="prefetch" href="/hancock-doc/assets/js/24.2d6cc0ee.js"><link rel="prefetch" href="/hancock-doc/assets/js/26.67a87c8d.js"><link rel="prefetch" href="/hancock-doc/assets/js/27.938a2397.js"><link rel="prefetch" href="/hancock-doc/assets/js/28.fff62550.js"><link rel="prefetch" href="/hancock-doc/assets/js/29.4d3f946c.js"><link rel="prefetch" href="/hancock-doc/assets/js/3.1aba4a82.js"><link rel="prefetch" href="/hancock-doc/assets/js/30.d0fab01e.js"><link rel="prefetch" href="/hancock-doc/assets/js/5.41b26b68.js"><link rel="prefetch" href="/hancock-doc/assets/js/6.5169a9fe.js"><link rel="prefetch" href="/hancock-doc/assets/js/7.a5e9ce82.js"><link rel="prefetch" href="/hancock-doc/assets/js/8.63216889.js"><link rel="prefetch" href="/hancock-doc/assets/js/9.3b38d00f.js">
    <link rel="stylesheet" href="/hancock-doc/assets/css/0.styles.f72bef6a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar navbar-vuepress"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/hancock-doc/" class="home-link router-link-active"><img src="/hancock-doc/logo.svg" alt="Hancock" class="logo"> <!----></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/hancock-doc/" class="nav-link">Home</a></div><div class="nav-item"><a href="/hancock-doc/guide/" class="nav-link router-link-active">Guide</a></div><div class="nav-item"><a href="https://github.com/BBVA?utf8=%E2%9C%93&amp;q=hancock" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/hancock-doc/" class="nav-link">Home</a></div><div class="nav-item"><a href="/hancock-doc/guide/" class="nav-link router-link-active">Guide</a></div><div class="nav-item"><a href="https://github.com/BBVA?utf8=%E2%9C%93&amp;q=hancock" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/hancock-doc/guide/" class="sidebar-heading clickable router-link-active open"><span>Guide</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/hancock-doc/guide/getting-started/" class="sidebar-link">Getting Started</a></li><li><a href="/hancock-doc/guide/getting-started/Concept.html" class="sidebar-link">Concepts</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/hancock-doc/guide/dlt-adapter/" class="sidebar-heading clickable"><span>DLT Adapter</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/hancock-doc/guide/wallet-hub" class="sidebar-heading clickable"><span>Wallet Hub</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/hancock-doc/guide/dlt-broker/" class="sidebar-heading clickable"><span>DLT Broker</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/hancock-doc/guide/sdk/" class="sidebar-heading clickable router-link-active"><span>SDK</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="content default"><h1 id="transaction-service"><a href="#transaction-service" aria-hidden="true" class="header-anchor">#</a> Transaction Service</h1> <p>The Transaction Service provides some methods to let the user to send transactions in different conditions.</p> <p>The service needs a <a href="../java/#using-all-together">config object</a>.</p> <div class="language-java extra-class"><pre class="language-java"><code>    <span class="token keyword">public</span> <span class="token function">EthereumTransactionService</span><span class="token punctuation">(</span>HancockConfig config<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>config <span class="token operator">=</span> config<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><h2 id="send"><a href="#send" aria-hidden="true" class="header-anchor">#</a> Send</h2> <p>Send a transaction to the network according to the specification in the txConfig. Could be signed and then sent, sent to a sign provider before send it or send it assuming that the node has this account unlocked.</p> <div class="language-java extra-class"><pre class="language-java"><code>  <span class="token operator">*</span> <span class="token annotation punctuation">@param</span> rawtx    A raw transaction which will be sent to Ethereum
  <span class="token operator">*</span> <span class="token annotation punctuation">@param</span> txConfig Options which will be used to config the transaction
  <span class="token operator">*</span> @<span class="token keyword">return</span> The result of the request
  <span class="token operator">*</span> @<span class="token keyword">throws</span> Exception

ethereumClient<span class="token punctuation">.</span><span class="token function">getTransactionService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>rawtx<span class="token punctuation">,</span> txConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="sign-message"><a href="#sign-message" aria-hidden="true" class="header-anchor">#</a> Sign Message</h2> <p>Sign a given message with the private key pass as a parameter.</p> <div class="language-java extra-class"><pre class="language-java"><code>  <span class="token operator">*</span> <span class="token annotation punctuation">@param</span> message    A raw message which will be signed
  <span class="token operator">*</span> <span class="token annotation punctuation">@param</span> privateKey The <span class="token keyword">private</span> key with which the raw message will be signed
  <span class="token operator">*</span> @<span class="token keyword">return</span> The signed message as hex string

ethereumClient<span class="token punctuation">.</span><span class="token function">getTransactionService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">signMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> privateKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="sign-personal-message"><a href="#sign-personal-message" aria-hidden="true" class="header-anchor">#</a> Sign Personal Message</h2> <p>Sign a raw personal message with the given private key using https://github.com/ethereum/EIPs/blob/master/EIPS/eip-712.md</p> <div class="language-java extra-class"><pre class="language-java"><code>  <span class="token operator">*</span> <span class="token annotation punctuation">@param</span> message    A raw message which will be signed
  <span class="token operator">*</span> <span class="token annotation punctuation">@param</span> privateKey The <span class="token keyword">private</span> key with which the raw message will be signed
  <span class="token operator">*</span> @<span class="token keyword">return</span> The signed message as hex string

ethereumClient<span class="token punctuation">.</span><span class="token function">getTransactionService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">signPersonalMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> privateKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="sign-transaction"><a href="#sign-transaction" aria-hidden="true" class="header-anchor">#</a> Sign Transaction</h2> <p>When we want to send a Transaction to the DLT, we have to sign it previosly with the private key of the address used as from if the node does not have the account unlocked.</p> <div class="language-java extra-class"><pre class="language-java"><code>  <span class="token operator">*</span> <span class="token annotation punctuation">@param</span> rawTransaction A raw transaction which will be signed with the privatekey
  <span class="token operator">*</span> <span class="token annotation punctuation">@param</span> privateKey     The <span class="token keyword">private</span> key with which the raw transaction will be signed
  <span class="token operator">*</span> @<span class="token keyword">return</span> The signed transaction

ethereumClient<span class="token punctuation">.</span><span class="token function">getTransactionService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">signTransaction</span><span class="token punctuation">(</span>rawTransaction<span class="token punctuation">,</span> privateKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="send-raw-transaction"><a href="#send-raw-transaction" aria-hidden="true" class="header-anchor">#</a> Send Raw Transaction</h2> <p>Send a transaction to the DLT assuming that the node that receive the transaction has the account used as from unlocked, that means that all transaction received for the node with this account as from will be processed if they are correct.</p> <div class="language-java extra-class"><pre class="language-java"><code>  <span class="token operator">*</span> <span class="token annotation punctuation">@param</span> rawTx A raw transaction which will be sent to the network
  <span class="token operator">*</span> @<span class="token keyword">return</span> The result of the transaction
  <span class="token operator">*</span> @<span class="token keyword">throws</span> HancockException

ethereumClient<span class="token punctuation">.</span><span class="token function">getTransactionService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sendRawTransaction</span><span class="token punctuation">(</span>rawTx<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="send-to-sign-provider"><a href="#send-to-sign-provider" aria-hidden="true" class="header-anchor">#</a> Send To Sign Provider</h2> <p>Send a transaction to be sign in a third party sing provider and once signed, it will be send to the DLT.</p> <div class="language-java extra-class"><pre class="language-java"><code>  <span class="token operator">*</span> <span class="token annotation punctuation">@param</span> rawTx    A raw transaction which will be signed by the sign provider
  <span class="token operator">*</span> <span class="token annotation punctuation">@param</span> txConfig Options which will be used to config the transaction <span class="token punctuation">(</span>provider and callBack <span class="token function">Options</span><span class="token punctuation">(</span>optional<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token operator">*</span> @<span class="token keyword">return</span> The result of the request
  <span class="token operator">*</span> @<span class="token keyword">throws</span> HancockException

ethereumClient<span class="token punctuation">.</span><span class="token function">getTransactionService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sendToSignProvider</span><span class="token punctuation">(</span>rawTx<span class="token punctuation">,</span> txConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="send-signed-transaction"><a href="#send-signed-transaction" aria-hidden="true" class="header-anchor">#</a> Send Signed Transaction</h2> <p>Send a transaction that has been signed previosly to the WalletHub service.</p> <div class="language-java extra-class"><pre class="language-java"><code>
  <span class="token operator">*</span> <span class="token annotation punctuation">@param</span> signedTransaction A signed transaction which will be send to the network
  <span class="token operator">*</span> <span class="token annotation punctuation">@param</span> txConfig          Options which will be used to config the transaction
  <span class="token operator">*</span> @<span class="token keyword">return</span> The result of the transaction
  <span class="token operator">*</span> @<span class="token keyword">throws</span> Exception
  
ethereumClient<span class="token punctuation">.</span><span class="token function">getTransactionService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sendSignedTransaction</span><span class="token punctuation">(</span>signedTransaction<span class="token punctuation">,</span> txConfig<span class="token punctuation">)</span>
</code></pre></div><h2 id="send-signed-transaction-locally"><a href="#send-signed-transaction-locally" aria-hidden="true" class="header-anchor">#</a> Send Signed Transaction Locally</h2> <p>Send a transaction to the DLT, given in the config, that has been signed previosly.</p> <div class="language-java extra-class"><pre class="language-java"><code>
  <span class="token operator">*</span> <span class="token annotation punctuation">@param</span> signedTransaction A signed transaction which will be send to the network
  <span class="token operator">*</span> @<span class="token keyword">return</span> The transaction hash
  <span class="token operator">*</span> @<span class="token keyword">throws</span> InterruptedException
  <span class="token operator">*</span> @<span class="token keyword">throws</span> ExecutionException
  
hancockClient<span class="token punctuation">.</span><span class="token function">getTransactionService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sendSignedTransactionLocally</span><span class="token punctuation">(</span>signedTransaction<span class="token punctuation">)</span>
</code></pre></div><h2 id="subscribe"><a href="#subscribe" aria-hidden="true" class="header-anchor">#</a> Subscribe</h2> <p>Create a websocket subscription with the broker to watch transactions of type &quot;transactions&quot; in the network.</p> <div class="language-java extra-class"><pre class="language-java"><code>
  <span class="token operator">*</span> <span class="token annotation punctuation">@param</span> addresses An array of address that will be added to the watch list
  <span class="token operator">*</span> <span class="token annotation punctuation">@param</span> consumer  A consumer plugin previously configured in hancock that will handle each received event
  <span class="token operator">*</span> @<span class="token keyword">return</span> A HancockSocket object which can add <span class="token keyword">new</span> <span class="token class-name">subscriptions</span> and listen incoming message
  <span class="token operator">*</span> @<span class="token keyword">throws</span> HancockException

ethereumClient<span class="token punctuation">.</span><span class="token function">getTransactionService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>addresses<span class="token punctuation">,</span> consumer<span class="token punctuation">)</span>
´´´

</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/hancock-doc/guide/sdk/services/Token.html" class="prev">
          Token
        </a></span> <span class="next"><a href="/hancock-doc/guide/sdk/services/Transfer.html">
          Transfer
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/hancock-doc/assets/js/app.28931f4a.js" defer></script><script src="/hancock-doc/assets/js/4.b7600f4f.js" defer></script><script src="/hancock-doc/assets/js/2.80b219c5.js" defer></script><script src="/hancock-doc/assets/js/25.dc9054c3.js" defer></script>
  </body>
</html>
