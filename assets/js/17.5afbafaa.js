(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{350:function(t,e,a){"use strict";a.r(e);var s=a(37),n=Object(s.a)({},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"check-transactions-on-dlt-broker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#check-transactions-on-dlt-broker","aria-hidden":"true"}},[t._v("#")]),t._v(" Check transactions on Dlt Broker")]),t._v(" "),a("p",[t._v("This commponennt allow us open a connection to dlt network and listen all kind of events generated.")]),t._v(" "),a("p",[t._v("Actually DLT Broker can connect with Ethereum network.")]),t._v(" "),a("h2",{attrs:{id:"event-kind"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#event-kind","aria-hidden":"true"}},[t._v("#")]),t._v(" Event kind")]),t._v(" "),a("p",[t._v("The DLT Broker accepts three kind of petitions to listen events of an Ethereum DLT network:")]),t._v(" "),a("ul",[a("li",[t._v("Watch-transfers: To get information about transfer registered in a transaction block of a specific address.")]),t._v(" "),a("li",[t._v("Watch-transactions: To get information about all events registered on Ethereum network of a specific address.")]),t._v(" "),a("li",[t._v("Watch-contracts: To get information and logs produced about all events registered on Ethereum network related with a specific contract.")])]),t._v(" "),a("p",[t._v("The Ethereum network produces three kinds of events:")]),t._v(" "),a("ul",[a("li",[t._v('Tx: Event dispatched every time a watched address is related with a transaction of kind "transfer".')]),t._v(" "),a("li",[t._v("Event: Event dispatched every time a watched contract fires an event of any kind.")]),t._v(" "),a("li",[t._v("Log: Event dispatched with logs of operations.")])]),t._v(" "),a("p",[t._v("To know more about specification and parameters, can be found the details "),a("a",{attrs:{href:"https://bbva.github.io/hancock-dlt-broker/api.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("here"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("h2",{attrs:{id:"use-case"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#use-case","aria-hidden":"true"}},[t._v("#")]),t._v(" Use case")]),t._v(" "),a("p",[t._v("The Hancock broker service is accessible by a standard web socket interface.")]),t._v(" "),a("p",[t._v("First of all, we need to subscribe to DLT-Broker transactions from a specific address.")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" request "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"kind"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"watch-transactions"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"body"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0xd2Bb4b9C30DE543C2a247E818391F37A98E62D3F"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"status"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pending"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nws "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WebSocket")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("`ws://localhost:3009/dlt-broker/ethereum/subscribe`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nws"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("After thar, for example, we have to perform a transaction from the selected address. To know more visit this  "),a("a",{attrs:{href:"https://bbva.github.io/hancock-dlt-adapter/api.html#hancock-dlt-adapter-api--dlt-transfers"}},[t._v("link")]),t._v(".")]),t._v(" "),a("p",[t._v("Check the mined transaction event on your WebSocket client, you can see the details about the "),a("a",{attrs:{href:"https://bbva.github.io/hancock-ms-dlt-broker/api.html#receivetxmessage"}},[t._v("transaction")]),t._v(".")])])},[],!1,null,null,null);e.default=n.exports}}]);